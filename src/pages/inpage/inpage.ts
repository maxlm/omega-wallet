import { InpageProvider } from '@root/src/lib/InpageProvider';
import { announceProvider } from '@root/src/lib/EIP6963';
import { InjectedProvider } from '@root/src/lib/provider/InjectedProvider';
import { WindowPostMessageRpc } from '@root/src/lib/rpc/WindowPostMessageRpc';
import { v4 as uuid } from 'uuid';

const omegaWalletProvider = new InpageProvider();
(window as any).omegaWallet = omegaWalletProvider;
(window as any).ethereum = omegaWalletProvider;

announceProvider({
  provider: new InjectedProvider(new WindowPostMessageRpc(window)),
  info: {
    uuid: uuid(),
    name: 'OmegaWallet',
    rdns: 'com.omegawallet',
    icon: "data:image/svg+xml,%3Csvg width='36' height='36' viewBox='0 0 138.671 73.112' xmlns='http://www.w3.org/2000/svg'%3E%3Cg id='svgGroup' stroke-linecap='round' fill-rule='evenodd' font-size='9pt' stroke='%23000' stroke-width='0.25mm' fill='%23000' style='stroke:%23000;stroke-width:0.25mm;fill:%23000'%3E%3Cpath d='M 29.297 72.077 L 30.518 64.216 A 19.39 19.39 0 0 0 41.444 57.492 A 25.643 25.643 0 0 0 42.773 55.768 Q 46.486 50.518 48.442 42.185 A 69.568 69.568 0 0 0 49.463 36.872 L 50.293 30.964 L 50.684 25.739 A 38.859 38.859 0 0 0 50.69 25.053 Q 50.69 19.325 48.955 15.332 A 15.06 15.06 0 0 0 47.461 12.653 A 11.405 11.405 0 0 0 39.494 7.853 A 16.886 16.886 0 0 0 37.451 7.673 A 21.163 21.163 0 0 0 36.822 7.663 Q 29.396 7.663 24.144 12.972 A 21.616 21.616 0 0 0 23.633 13.508 A 26.145 26.145 0 0 0 18.861 21.01 Q 17.099 25.113 16.235 30.304 Q 14.629 39.964 14.629 45.915 A 39.738 39.738 0 0 0 14.648 47.175 Q 14.795 54.45 17.358 58.722 A 12.108 12.108 0 0 0 20.547 62.299 A 11.391 11.391 0 0 0 24.561 64.167 L 23.34 72.077 L 0 72.077 L 1.367 64.411 L 11.816 64.313 A 40.333 40.333 0 0 1 5.551 42.634 A 45.488 45.488 0 0 1 5.957 36.628 L 6.934 30.182 A 43.704 43.704 0 0 1 11.025 17.507 A 40.474 40.474 0 0 1 12.817 14.338 A 33.966 33.966 0 0 1 18.386 7.499 A 28.742 28.742 0 0 1 23.682 3.571 A 26.731 26.731 0 0 1 37.258 0.001 A 30.768 30.768 0 0 1 37.842 0.007 A 23.822 23.822 0 0 1 44.555 1.09 A 20.724 20.724 0 0 1 48.877 3.034 A 19.904 19.904 0 0 1 55.707 9.879 A 24.341 24.341 0 0 1 56.543 11.359 A 29.395 29.395 0 0 1 59.508 20.685 A 35.392 35.392 0 0 1 59.814 23.591 A 28.805 28.805 0 0 1 59.874 25.075 Q 59.926 28.39 59.331 32.978 A 108.597 108.597 0 0 1 58.667 37.36 A 46.481 46.481 0 0 1 52.832 53.376 A 40.232 40.232 0 0 1 43.115 64.557 L 53.662 64.411 L 52.295 72.077 L 29.297 72.077 Z M 80.371 19.245 L 89.941 19.294 L 86.426 25.495 A 78.343 78.343 0 0 0 81.743 35.09 A 69.246 69.246 0 0 0 80.542 38.288 A 41.604 41.604 0 0 0 78.541 47.272 A 51.654 51.654 0 0 0 78.223 52.448 L 78.223 52.936 A 32.099 32.099 0 0 0 78.393 56.358 Q 78.772 59.888 80 62.119 A 9.238 9.238 0 0 0 80.151 62.384 A 7.441 7.441 0 0 0 81.835 64.384 Q 83.385 65.646 85.553 65.771 A 8.157 8.157 0 0 0 85.693 65.778 A 12.349 12.349 0 0 0 86.453 65.802 Q 96.041 65.802 98.888 50.265 A 53.405 53.405 0 0 0 98.926 50.055 L 101.416 34.479 L 110.303 34.479 L 108.008 49.128 Q 107.715 51.423 107.666 54.255 A 25.762 25.762 0 0 0 107.661 54.736 Q 107.661 59.623 109.57 62.58 A 6.635 6.635 0 0 0 114.304 65.674 A 9.016 9.016 0 0 0 115.479 65.778 A 10.495 10.495 0 0 0 115.884 65.786 Q 124.07 65.786 127.737 52.747 A 48.985 48.985 0 0 0 128.027 51.667 A 58.248 58.248 0 0 0 129.861 37.228 A 57.717 57.717 0 0 0 129.59 31.647 Q 128.955 25.251 126.758 19.147 L 135.693 19.245 A 44.445 44.445 0 0 1 138.477 31.647 A 63.876 63.876 0 0 1 138.671 36.615 A 61.622 61.622 0 0 1 136.597 52.497 A 46.662 46.662 0 0 1 134.408 58.933 Q 132.007 64.523 128.418 68 A 17.36 17.36 0 0 1 115.916 73.109 A 20.759 20.759 0 0 1 115.381 73.102 A 15.065 15.065 0 0 1 110.428 72.216 A 13.264 13.264 0 0 1 106.396 69.855 Q 102.686 66.706 101.709 61.432 Q 95.605 73.444 84.717 73.102 A 16.063 16.063 0 0 1 80.267 72.375 A 13.146 13.146 0 0 1 76.172 70.221 A 13.865 13.865 0 0 1 72.459 65.736 A 19.183 19.183 0 0 1 71.069 62.36 A 32.42 32.42 0 0 1 69.788 55.794 Q 69.57 53.478 69.629 50.983 A 54.678 54.678 0 0 1 80.046 19.703 A 66.23 66.23 0 0 1 80.371 19.245 Z' vector-effect='non-scaling-stroke'/%3E%3C/g%3E%3C/svg%3E",
  },
});
